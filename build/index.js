(()=>{"use strict";var t,e={996:()=>{const t=window.wp.element,e=window.wp.components,i=window.wp.i18n,n=window.wp.plugins,l=window.wp.hooks,s=window.wp.date,r=n=>{let{rules:l,setAttributes:r,attributes:a}=n;const[o,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!1),b=(t,e)=>{r({contentVisibilityRules:{...e,dateTime:{...e.dateTime,[t]:null}}})},m=()=>(0,t.createElement)(e.DateTimePicker,{currentDate:l.dateTime.start,onChange:t=>{r({contentVisibilityRules:{...l,dateTime:{...l.dateTime,start:t}}}),c(!1)},is12Hour:!1}),y=()=>(0,t.createElement)(e.DateTimePicker,{currentDate:l.dateTime.end,onChange:t=>{r({contentVisibilityRules:{...l,dateTime:{...l.dateTime,end:t}}}),d(!1)},is12Hour:!1}),p=()=>(0,t.createElement)(e.Icon,{icon:()=>(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x-circle"},(0,t.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.createElement)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,t.createElement)("line",{x1:"9",y1:"9",x2:"15",y2:"15"}))});return(0,t.createElement)((()=>(0,t.createElement)("div",{className:"content-visibility-schedule-controls"},(0,t.createElement)("div",{className:"components-dropdown"},(0,t.createElement)(e.Button,{isLink:!0,className:"content-visibility-set-date-time",icon:"calendar-alt",onClick:()=>c(!o)},l.dateTime.start&&"string"==typeof l.dateTime.start?(0,s.dateI18n)("D M j Y, G:i",l.dateTime.start):(0,i.__)("Set Start Date/Time")),o&&(0,t.createElement)(e.Popover,{position:"middle left",className:"content-visibility-picker-popover content-visibility-picker-popover-start",onClose:c.bind(null,!1)},(0,t.createElement)(m,null)),l.dateTime.start&&"string"==typeof l.dateTime.start&&(0,t.createElement)(e.Button,{isLink:!0,label:"Clear date and time",className:"content-visibility-clear-date-time",onClick:()=>{b("start",l)}},(0,t.createElement)(p,null))),(0,t.createElement)("div",{className:"components-dropdown"},(0,t.createElement)(e.Button,{isLink:!0,className:"content-visibility-set-date-time",icon:"calendar-alt",onClick:()=>d(!u)},l.dateTime.end&&"string"==typeof l.dateTime.end?(0,s.dateI18n)("D M j Y, G:i",l.dateTime.end):(0,i.__)("Set End Date/Time")),u&&(0,t.createElement)(e.Popover,{position:"middle left",className:"content-visibility-picker-popover content-visibility-picker-popover-end",onClose:d.bind(null,!1)},(0,t.createElement)(y,null)),l.dateTime.end&&"string"==typeof l.dateTime.end&&(0,t.createElement)(e.Button,{isLink:!0,label:"Clear date and time",className:"content-visibility-clear-date-time",onClick:()=>{b("end",l)}},(0,t.createElement)(p,null))),(0,t.createElement)("p",{className:"date-time-help-intro content-visibility-help-text"},(0,i.__)("Set start and/or end dates for when this block will be "+a.contentVisibility+". Not selecting either date will mean this block is "+a.contentVisibility+" at all times.")))),null)},a=function(n){let{setAttributes:s,attributes:a}=n,o=a.contentVisibilityRules,c=function(t,e){if(!t.contentVisibilityRules)return!1;if(!t.contentVisibilityRules[e])return!1;let i=!1;return"dateTime"===e&&(t.contentVisibilityRules[e]&&t.contentVisibilityRules[e].start&&0!==Object.keys(t.contentVisibilityRules[e].start).length&&(i=!0),t.contentVisibilityRules[e]&&t.contentVisibilityRules[e].end&&0!==Object.keys(t.contentVisibilityRules[e].end).length&&(i=!0)),(0,l.applyFilters)("content-visibility-has-rules",i,t,e)}(a,"dateTime")?" has-active-rules":"";return(0,t.createElement)(e.PanelBody,{title:(0,i.__)("Date and Time","content-visibility-date-time"),initialOpen:!1,className:"content-visibility-control-panel block-visibility-date-time-controls"+c},(0,t.createElement)(e.PanelRow,null,(0,t.createElement)(r,{rules:o,setAttributes:s,attributes:a})))};function o(i){let n=i.attributes.contentVisibilityRules.contentVisibilityRulesEnabled,l=i.attributes.hasOwnProperty("contentVisibility");return n&&l?(0,t.createElement)(a,{setAttributes:i.setAttributes,attributes:i.attributes}):(0,t.createElement)(e.Disabled,null,(0,t.createElement)(a,{setAttributes:i.setAttributes,attributes:i.attributes}))}(0,n.registerPlugin)("content-visibility-03-date-time-fill",{render:function(){return(0,t.createElement)(e.Fill,{name:"content-visibility-extra-controls"},(e=>(0,t.createElement)(o,{setAttributes:e.setAttributes,attributes:e.attributes})))}}),(0,l.addFilter)("contentVisibility.defaultContentVisibilityRules","content-visibility-date-time/block-visibility-rules",(function(t){return t.dateTime={start:null,end:null},t})),(0,l.addFilter)("blocks.registerBlockType","content-visibility/dateTimeAttributesDeprecation",(function(t){if(!t.attributes.contentVisibilityRules.default.dateTime)return t;const e={attributes:{...t.attributes,contentVisibilityRules:{...t.attributes.contentVisibilityRules,default:{...t.attributes.contentVisibilityRules.default,dateTime:{end:{},start:{}}}}},supports:t.supports,save:t.save,migrate:t=>({...t,contentVisibilityRules:{...t.contentVisibilityRules,dateTime:{end:null,start:null}}}),isEligible:t=>t&&t.contentVisibilityRules&&t.contentVisibilityRules.dateTime&&t.contentVisibilityRules.dateTime.start&&Object.getPrototypeOf(t.contentVisibilityRules.dateTime.start)===Object.prototype&&0===Object.keys(t.contentVisibilityRules.dateTime.start).length};return t.deprecated=t.deprecated&&Array.isArray(t.deprecated)?[...t.deprecated,e]:[e],t}),99)}},i={};function n(t){var l=i[t];if(void 0!==l)return l.exports;var s=i[t]={exports:{}};return e[t](s,s.exports,n),s.exports}n.m=e,t=[],n.O=(e,i,l,s)=>{if(!i){var r=1/0;for(u=0;u<t.length;u++){for(var[i,l,s]=t[u],a=!0,o=0;o<i.length;o++)(!1&s||r>=s)&&Object.keys(n.O).every((t=>n.O[t](i[o])))?i.splice(o--,1):(a=!1,s<r&&(r=s));if(a){t.splice(u--,1);var c=l();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[i,l,s]},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={826:0,431:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var l,s,[r,a,o]=i,c=0;if(r.some((e=>0!==t[e]))){for(l in a)n.o(a,l)&&(n.m[l]=a[l]);if(o)var u=o(n)}for(e&&e(i);c<r.length;c++)s=r[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(u)},i=globalThis.webpackChunkcontent_visibility_user_role=globalThis.webpackChunkcontent_visibility_user_role||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var l=n.O(void 0,[431],(()=>n(996)));l=n.O(l)})();